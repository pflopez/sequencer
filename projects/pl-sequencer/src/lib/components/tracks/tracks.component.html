<div *ngFor="let track of tracks" class="track">
  <div class="track-name" *ngIf="showTrackName">
    {{track.name}}
  </div>
  <div class="track-steps">
    <div *ngFor="let step of track.steps; index as i"
         class="step "
         (mousedown)="clickStep($event, step)"
         (mouseenter)="hoverStep($event,step)"
         (mouseup)="endClick()"
         [class]="step.velocityText"
         [ngClass]="{ active: (track.activeStep$ | async)  === i + 1, on: (step.on)}"></div>
  </div>
  <select
    #stepsLength
    *ngIf="showTrackLength"
    (change)="changeInstrumentLength(track,stepsLength.value)">
    <option *ngFor="let n of numberSteps; let i= index" [value]="i + 1"
            [selected]="track.steps.length === i + 1">{{i + 1}}</option>
  </select>
  <pl-knob [value]="track.volume" (updateValue)="changeVolume($event, track)"></pl-knob>
  <pl-knob [value]="track.length" (updateValue)="changeLength($event, track)"></pl-knob>
</div>
<div class="active-step-indicator" [ngClass]="{padded: showTrackName}" *ngIf="showActiveStepBar">
  <div *ngFor="let key of maxLength | repeater"
       class="indicator"
       [ngClass]="{ active: (maxActiveStep$ | async)  === key  + 1 }"
  ></div>
</div>
